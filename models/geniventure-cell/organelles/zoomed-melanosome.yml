---
name: fake-melanosome
image: assets/melanosome.svg
selector: "#melanosome"
spawn:
  'on':
    selector: "#golgi path"
    at: 0.29
  never: true
properties:
  size: 0.1
initialState: growing
rules:
  growing:
    - if:
        fact: world.albino
      then:
        grow:
          by: 0.005
          until: 0.4
    - if:
        all:
          - fact:
              not: world.albino
          - fact: world.working_tyr1
      then:
      - set_attr:
          selector: '#melanin-gray'
          set:
            visibility: 'visible'
      - grow:
          by: 0.005
          until: 1
      - if:
          fact: size
          between: [0.5, 0.7]
        then:
          set_attr:
            selector: "#Layer0_28_FILL"
            set:
              fill: url(#red)
      - if:
          fact: size
          greaterThan: 0.7
        then:
          set_attr:
            selector: "#Layer0_28_FILL"
            set:
              fill: url(#gray)
    - if:
        all:
          - fact:
              not: world.albino
          - fact:
              not: world.working_tyr1
      then:
      - set_attr:
          selector: '#melanin-red'
          set:
            visibility: 'visible'
      - grow:
          by: 0.005
          until: 0.6
          finally:
            set_attr:
              selector: "#Layer0_28_FILL"
              set:
                fill: url(#red)
